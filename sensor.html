<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>DHT sendors</title>
    <style type="text/css">
        body {
            font-size: 60pt;
            background-color: #000000;
        }

        table {
            border-collapse: collapse;
            border-color: #707070;
        }

        td {
            empty-cells: show;
            color: #FFFF00;
            text-align: center;
            border-color: #707070;
        }

        td.title {
            font-weight: bolder;
            color: #000000;
            background-color: #FF9933;
        }

        a {
            color: #FFFF00;
        }

        a {
            text-decoration: none
        }

        a:hover {
            color: #707070;
        }

        div {
            color: #80FF00;
            margin: 30px;
        }
    </style>
    <style type="text/css"></style>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="xx" align="center">　</div>
    <div class="living_room" align="center">客廳：00°C, 00%</div>
    <div class="room1" align="center">主臥：00°C, 00%</div>
    <div class="room2" align="center">客房：00°C, 00%</div>
    <div class="room3" align="center">書房：00°C, 00%</div>
    <div class="pm25" align="center">PM2.5：00 ug/m3</div>
    <div class="pm10" align="center">PM10：00 ug/m3</div>
    <div align="center">
        <p>
            <a href="sensor2.html">圖表</a>
        </p>
    </div>

    <script>
        var max = 20;
        var living_room_temperature = 0, living_room_humidity = 0;
        var room1_temperature = 0, room1_humidity = 0;
        var room2_temperature = 0, room2_humidity = 0;
        var room3_temperature = 0, room3_humidity = 0;
        var plant_level = -1, plant_water_times = -1;
        var pm25 = 0, pm10 = 0;

        $.getJSON("https://api.thingspeak.com/channels/72313/feeds.json?results=" + String(max),
            function (data) {
                $.each(data, function (key, val) {
                    if (key == "feeds") {
                        for (var i = 0; i < max; i++) {
                            if (val[i].field1 && val[i].field2) {
                                living_room_temperature = val[i].field1;
                                living_room_humidity = val[i].field2;
                            } else if (val[i].field3 && val[i].field4) {
                                room1_temperature = parseInt(val[i].field3);
                                room1_humidity = parseInt(val[i].field4);
                            } else if (val[i].field5 && val[i].field6) {
                                room2_temperature = parseInt(val[i].field5);
                                room2_humidity = parseInt(val[i].field6);
                            } else if (val[i].field7 && val[i].field8) {
                                room3_temperature = parseInt(val[i].field7);
                                room3_humidity = parseInt(val[i].field8);
                            }
                        }

                        $("div.living_room").html("客廳：" + living_room_temperature + "°C, " + living_room_humidity + "%");
                        $("div.room1").html("主臥：" + room1_temperature + "°C, " + room1_humidity + "%");
                        $("div.room2").html("客房：" + room2_temperature + "°C, " + room2_humidity + "%");
                        $("div.room3").html("書房：" + room3_temperature + "°C, " + room3_humidity + "%");
                    }
                });
            });

        $.getJSON("https://api.thingspeak.com/channels/72839/feeds.json?results=" + String(max),
            function (data) {
                $.each(data, function (key, val) {
                    if (key == "feeds") {
                        for (var i = 0; i < max; i++) {
                            if (val[i].field2)
                                pm25 = parseInt(val[i].field2);

                            if (val[i].field3)
                                pm10 = parseInt(val[i].field3);

                        }
                        $("div.pm25").html("PM2.5：" + pm25 + " ug/m3");
                        $("div.pm10").html("PM10：" + pm10 + " ug/m3");
                    }
                });
            });
    </script>
<!--
    <div align="center">
        <div class="xx" align="center">　</div>
        <p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/1?dynamic=true&max=50&min=0&results=100&title=%E5%AE%A2%E5%BB%B3-%E6%BA%AB%E5%BA%A6&type=spline&yaxismax=40&yaxismin=20"></iframe>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/2?dynamic=true&max=100&min=0&results=100&title=%E5%AE%A2%E5%BB%B3-%E6%BF%95%E5%BA%A6&type=spline&yaxismax=100&yaxismin=40"></iframe>
        </p>
        <p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&max=100&min=0&results=100&title=DHT22+%E6%BA%AB%E5%BA%A6%28%E4%B8%BB%E8%87%A5%29&type=spline&yaxismax=40&yaxismin=20"></iframe>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/4?dynamic=true&max=100&min=0&results=100&title=%E4%B8%BB%E8%87%A5-%E6%BF%95%E5%BA%A6&type=spline&yaxismax=100&yaxismin=50"></iframe>
        </p>
        <p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/5?bgcolor=%23ffffff&color=%23d62020&dynamic=true&max=50&min=0&results=100&title=%E5%AE%A2%E6%88%BF-%E6%BA%AB%E5%BA%A6&type=spline&yaxismax=40&yaxismin=20"></iframe>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/6?bgcolor=%23ffffff&color=%23d62020&dynamic=true&max=100&min=0&results=100&title=%E5%AE%A2%E6%88%BF-%E6%BF%95%E5%BA%A6&type=spline&yaxismax=100&yaxismin=50"></iframe>
        </p>
        <p>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/7?bgcolor=%23ffffff&color=%23d62020&dynamic=true&max=50&min=0&results=100&title=%E6%9B%B8%E6%88%BF-%E6%BA%AB%E5%BA%A6&type=spline&yaxismax=40&yaxismin=20"></iframe>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72313/charts/8?bgcolor=%23ffffff&color=%23d62020&dynamic=true&max=100&min=0&results=100&title=%E6%9B%B8%E6%88%BF-%E6%BF%95%E5%BA%A6&type=spline&yaxismax=100&yaxismin=50"></iframe>
        </p>
		<p>
			<iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72839/charts/2?dynamic=false&title=PM2.5&type=spline"></iframe>
			<iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/72839/charts/3?dynamic=false&title=PM10&type=spline"></iframe>
		</p>
    </div>
-->
</body>

</html>
